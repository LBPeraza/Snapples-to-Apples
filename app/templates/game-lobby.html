{% extends "base.html" %}

{% block title %}Lobby{% endblock %}

{% block links %}
    {{ macros.navlink("Log Out", url_for(".logout")) }}
{% endblock %}

{% block pagename %}Game Lobby{% endblock %}
{% block subname %}
{% if isHost %}
    You're the host! <strong>Modify</strong> the game parameters,
    <strong>Wait</strong> for more players, or <strong>Start</strong> the game
    now!
{% else %}
    <strong>Wait</strong> for the host to start the game, or
    <strong>Leave</strong> and find a different match!
{% endif %}
{% endblock %}

{% block body %}
<section>
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>Players</h2>
                <hr class="star-primary"></hr>
            </div>
            <div class="col-lg-8 col-lg-offset-2 text-center">
                <table class="table table-striped">
                    <thead>
                        <tr class="text-center">
                            <th class="text-center">Name</th>
                            <th class="text-center">Experience</th>
                            {% if isHost %}
                                <th class="text-center">Kick</th>
                                <th class="text-center">Make Host</th>
                            {% endif %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in users %}
                        <tr>
                            <td style="vertical-align: middle;">{{ user.username }}</td>
                            <td style="vertical-align: middle;">{{ user.experience }}</td>
                            {% if isHost  %}
                            <td style="vertical-align: middle;">
                                {% if user.username != username %}
                                    <a href="{{ url_for(".kick", id=user.id) }}"
                                    class="btn btn-danger">Kick</a>
                                {% endif %}
                            </td>
                            <td style="vertical-align: middle;">
                                {% if user.username != username %}
                                    <a href="{{ url_for(".host", id=user.id) }}"
                                    class="btn btn-success">Make Host</a>
                                {% endif %}
                            </td>
                            {% endif %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <form method='POST' action="/pickaword/">
                    {{form.hidden_tag()}}
                    {% if isHost %}
                        <button type="submit" class="btn btn-default">Start the Game</button>
                    {% endif %}
                </form>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.min.js"></script>
<script src="{{ url_for("static", filename="js/game-lobby.js") }}"></script>
{% endblock %}
